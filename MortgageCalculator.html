<!DOCTYPE html>
<html lang="en">

<head>
    <title>Mortgage Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap-3.3.7-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" type="text/css" href="mortgage-calculator-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type='text/javascript' src='knockout-3.4.0.js'></script>
    <script type='text/javascript' src='bootstrap-3.3.7-dist/js/bootstrap.min.js'></script>
    <script type='text/javascript' src='calculator.js'></script>
</head>

<body>
    <div class="container">
        <ul class="nav nav-tabs">
            <li class="tabber active" data-id="Parameters"><a><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Details</a></li>
            <li class="tabber" data-id="MonthlyPayments"><a><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Monthy Payments</a></li>
            <li class="tabber" data-id="Summary"><a><span class="glyphicon glyphicon-gbp" aria-hidden="true"></span> Summary</a></li>
        </ul>
        <br/>
        <div class="tabbable" id="Parameters">
            <form>
                <fieldset>
                    <legend>Property Information</legend>
                    <div class='row'>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'PropertyValue', prepend: '£', isNumeric: true, name: 'Property Value', value: PropertyValue}"></div>
                        </div>
                        <div class='col-sm-2'>
                            <div class='form-group'>
                                <label for="DepositPercentage">Deposit %</label>
                                <select class="form-control" data-bind="options: DepositPercentagesList,
                                   value: DepositPercentage,
                                   optionsCaption: '---'"></select>
                            </div>
                        </div>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'Deposit', prepend: '£', isNumeric: true, name: 'Deposit', value: Deposit, readonly: true}"></div>
                        </div>
                        <div class='col-sm-2'>
                            <div class="form-group">
                                <label>Equity Loan? </label>
                                <div class="input-group">
                                    <input data-bind="checked: EquityLoan" type="checkbox"> </div>
                            </div>
                        </div>
                        <!-- ko if: EquityLoan() === true -->
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'EquityLoanAmount', prepend: '£', isNumeric: true, name: 'Equity Loan Amount', value: EquityLoanAmount, readonly: true}"></div>
                        </div>
                        <!-- /ko -->
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Mortgage Details</legend>
                    <div class='row'>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'MortgageTermYears', append: 'Years', isNumeric: true, decimalplaces: 0, name: 'Mortgage Term', value: MortgageTermYears}"></div>
                        </div>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'InitialRate', append: '%', isNumeric: true, decimalplaces: 4, name: 'Initial Rate', value: InitialRate}"></div>
                        </div>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'InitialTerm', append: 'Months', isNumeric: true, decimalplaces: 0, name: 'Initial Term', value: InitialTerm}"></div>
                        </div>
                        <div class='col-sm-2'>
                            <div data-bind="textInput: {id: 'VariableRate', append: '%', isNumeric: true, decimalplaces: 4, name: 'Variable Rate', value: VariableRate}"></div>
                        </div>
                    </div>
                </fieldset>
                <fieldset style="display:none">
                    <legend>Rent Details</legend>
                    <div class='row'>
                        <div class='col-sm-2'>
                            <div class="form-group">
                                <label for="Rent">Current Rent</label>
                                <div class="input-group">
                                    <div class="input-group-addon">£</div>
                                    <input data-bind="value: Rent" type="text" class="form-control" id="Rent" placeholder="650"> </div>
                            </div>
                        </div>
                        <div class='col-sm-2'>
                            <div class="form-group">
                                <label for="HowLongUntil">How Long?</label>
                                <div class="input-group">
                                    <input data-bind="value: HowLongUntil" type="text" class="form-control" id="HowLongUntil" placeholder="12">
                                    <div class="input-group-addon">months</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ko if: Waste -->
                    <p>This means you will have wasted £
                        <text data-bind="text: Waste"></text> on rent.</p>
                    <!-- /ko -->
                </fieldset>
            </form>
        </div>
        <div class="tabbable" id="MonthlyPayments" style="display:none;">
            <table class="table table-striped table-fixed">
                <thead>
                    <th> Month </th>
                    <th> Repayment Amount (£) </th>
                    <!-- ko if: EquityLoan() === true -->
                    <th> Equity Loan Interest (%) </th>
                    <th> Equity Loan Interest (£) </th>
                    <!-- /ko -->
                    <th> Total (£) </th>
                </thead>
                <!-- ko if: $data.Payments() -->
                <tbody data-bind="foreach: $data.Payments()">
                    <tr>
                        <td data-bind="text: $data.Month"></td>
                        <td data-bind="text: $data.RepaymentAmount"></td>
                        <!-- ko if: $parent.EquityLoan() === true -->
                        <td data-bind="text: $data.EquityLoanInterestPercentage"></td>
                        <td data-bind="text: $data.EquityLoanInterest"></td>
                        <!-- /ko -->
                        <td data-bind="text: $data.Total" style="font-weight:bold"></td>
                    </tr>
                </tbody>
                <!-- /ko -->
            </table>
            <!-- ko ifnot: $data.Payments() -->
            <button data-bind="click: $data.recalculatePayments()" type="button" class="btn btn-default btn-lg btn-block">
                Recalculate
                <div data-bind="visible: Recalculate" class="button-load-spinner"></div>
            </button>
            <!-- /ko -->
        </div>
        <div class="tabbable" id="Summary" style="display:none">
            <form>
                <fieldset>
                    <div class=row>
                        <div class='col-sm-3'>
                            <div data-bind="textInput: {id: 'MortgageAmount', prepend: '£', isNumeric: true, name: 'Mortgage Amount', value: MortgageAmount, readonly: true}"></div>
                        </div>
                        <div class='col-sm-3'>
                            <div data-bind="textInput: {id: 'GrandTotal', prepend: '£', isNumeric: true, name: 'Total Repayment over period', value: GrandTotal, readonly: true}"></div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="breakdown">
                    <legend>Details</legend>
                    <p>So, you're looking at a property that costs £
                        <text data-bind="text: PropertyValue"></text> and you want to put down a
                        <text data-bind="text: DepositPercentage"></text>% deposit of £
                        <text data-bind="text: Deposit"></text>.</p>
                    <!-- ko if: EquityLoan() === true -->
                    <p>You also want to take advantage of the Government's Help to Buy Equity Loan, which equates to £
                        <text data-bind="text: EquityLoanAmount"></text>.</p>
                    <!-- /ko -->
                    <p>This means your overall mortgage borrowing amount would be £
                        <text data-bind="text: MortgageAmount"></text>.</p>
                    <p></p>
                    <p>You want your mortgage term will be
                        <text data-bind="text: MortgageTermYears"></text> years and will have an initial rate of
                        <text data-bind="text: InitialRate"></text>% for the first
                        <text data-bind="text: InitialTerm"></text> months and will then increase to a variable rate (currently
                        <text data-bind="text: VariableRate"></text>%).</p>
                    <!-- ko if: ProjectedPropertyValue -->
                    <p>Based on an esitmated annual increase of property valuation of
                        <text data-bind="text: EstimatedValueIncreasePercentage"></text>%, your property could be worth £
                        <text data-bind="text: ProjectedPropertyValue"></text> in
                        <text data-bind="text: MortgageTermYears"></text> years time.</p>
                    <!-- ko if: EquityLoan() === true -->
                    <p>However, you will be required to pay the government back the percentage value of the equity loan which equates to £
                        <text data-bind="text: ProjectedEquityLoanPayment"></text> - meaning you will receive £
                        <text data-bind="text: ProjectedWithEquityLoan"></text> from the sale of the property.</p>
                    <!-- /ko -->
                    <!-- /ko -->
                </fieldset>
            </form>
        </div>
    </div>
</body>

</html>